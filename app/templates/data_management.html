{% extends "base.html" %}

{% block inbox %}
<div class="inbox-header">
  <div>
    <h2>Documents</h2>
    <p class="inbox-subtitle">Storage and indexing</p>
  </div>
</div>
<div class="inbox-list">
  <div class="inbox-card">Supported: PDF, DOCX, TXT</div>
  <div class="inbox-card">Vectors: ChromaDB</div>
  <div class="inbox-card">Storage: Supabase</div>
</div>
{% endblock %}

{% block content %}
<section class="page-header">
  <h1>Data Management</h1>
  <p>Upload and maintain PDF, DOCX, and TXT files used in retrieval.</p>
</section>

<section class="card">
  <form id="uploadForm" class="upload-form">
    <input type="file" id="fileInput" multiple accept=".pdf,.docx,.txt" />
    <button type="submit">Upload & Index</button>
  </form>
  <p class="hint">Max upload size is controlled by backend config.</p>
</section>

<section class="card">
  <div class="table-header">
    <h2>Indexed Files</h2>
    <button id="refreshBtn" class="secondary">Refresh</button>
  </div>
  <div class="table-wrap">
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Size</th>
          <th>Chunks</th>
          <th>Created</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody id="filesTable"></tbody>
    </table>
  </div>
</section>

<div id="toast" class="toast" hidden></div>
<script src="{{ url_for('static', path='js/data_management.js') }}" defer></script>
{% endblock %}

